# 주성분 회귀식과 본모형의 관계

# OLS에서 문제가 되는 모형

주성분 회귀분석은 OLS를 사용할 때 발생한 '다중공선성'이란 문제를 해결하기 위한 것이다. 
따라서 논의는 OLS 추정식에서 출발한다. 

Model1은 OLS를 가정하고 적합한 회귀식이다. 이때 X의 변수 간 상관이 커, OLS를 적용하면 각 편회귀계수의 분산이 커지는 문제가 발생한다.
회귀계수의 분산이 커지면, 추정량의 변동이 심하다는 것이므로 
회귀식의 적합 결과가 그다지 믿을 만한 것이 되지 못한다. 

Model2는 단순히 X와 Y를 표준화하여 적합한 OLS 모형이다. 따라서 Model1과 보유하고 있는 정보량이 같고, 대신 중심화가 되었기 때문에 
상수항이 없는 모형이 된다. 

![KakaoTalk_20250527_221241904](https://github.com/user-attachments/assets/4419237c-aec8-4110-9d83-95322ab0c590)

# 주성분 구하기

따라서 표준화된 X(Xs라고 하자) 상관계수 행렬의 Eigen vector를 구해,
그들로 이루어진 행렬 V를 계산해낸다.

이전 포스팅에서 다루었던 바와 같이, 주성분은 Xs를 V에 정사영시킨 모습이다. 
정사영은 내적이니, 내적의 정의에 따라 주성분 C는 Xs들의 선형결합으로 표현된다.

그리고 이렇게 구한 주성분들로 Model3를 정의한다.

![KakaoTalk_20250527_221241904_01](https://github.com/user-attachments/assets/05af902c-a4fa-4283-b4df-6737e4f624d5)

# Model 간의 관계

![KakaoTalk_20250527_221241904_02](https://github.com/user-attachments/assets/543535b3-36f9-45cc-a1cb-946ea6d6bbb5)

따라서 위와 같은 세 개의 모델을 전개하였다. 첫 두 모델이 같은 정보를 담고 있다는 것은 직관적으로 이해가 되고,
공분산 행렬 또는 상관행렬이 X 데이터의 모양을 표현하는 선형변환을 시킨다는 점과 주성분은 그 상관행렬을 직교 벡터들 조합으로 표현해낼 수 있다는 점에서
Model3 또한 Model1, Model2와 같은 정보를 가지고 있다고 이해할 수 있다. 

# 한 모델에서 다른 모델로

세 모델이 모두 같은 정보를 담고 있으니, 서로 변환이 자유롭다는 것을 상상해볼 수 있다. 
먼저 Model3에서 사용된 주성분들은 모두 Xs의 선형함수로 재표현된다.
따라서 C들을 Xs로 표현해주면 아래와 같이 적을 수 있다.

![KakaoTalk_20250527_221241904_04](https://github.com/user-attachments/assets/68201c4c-4d4a-4ff5-9319-90c1977cf584)

이를 각 Xs에 대해 묶어주면 사실상 Model2와 같은 구조란 것을 볼 수 있다.
또한 표준화된 회귀계수는 본 회귀계수에 Sx/Sy를 곱하여 구할 수 있으므로, Model3을 통해 Model1까지 재표현이 가능하다.

따라서 우리는 주성분 회귀식을 구성해, 대칭행렬(공분산 행렬, 선형행렬 등)의 주성분은 서로 직교한다는 점을 이용해 다중공선성 문제에서 자유로워질 수 있고
이를 이용한 회귀식을 OLS로 적합하여, 우리가 애초에 원했던 Y와 X의 관계를 알아낼 수 있다. 
